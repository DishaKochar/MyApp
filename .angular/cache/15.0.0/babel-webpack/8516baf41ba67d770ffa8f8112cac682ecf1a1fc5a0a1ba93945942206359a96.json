{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../cart/cart.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"../../auth/http.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction BookComponent_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵtext(1, \"Enter quantity *Value Should be Greater than 0\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class BookComponent {\n  constructor(cartService, toastr, user) {\n    this.cartService = cartService;\n    this.toastr = toastr;\n    this.user = user;\n    this.book = {};\n    //@Output() bookEmitter = new EventEmitter<Book>();\n    this.isInCart = false;\n    this.qty = new FormGroup({\n      'quantity': new FormControl(1, [Validators.pattern(/^(?=[1-9])/)])\n    });\n  }\n  get quantity() {\n    return this.qty.get('quantity');\n  }\n  addtocart() {\n    this.isInCart = true;\n    this.cartService.add(this.book);\n    console.log(\"Book Component\", this.book);\n    //this.bookEmitter.emit(this.book);\n    this.book.email = JSON.parse(localStorage.getItem('userEmail') || '{}');\n    this.book.quantity = this.quantity.value;\n    this.user.addToCart(this.book).subscribe(res => {\n      if (res.status == 200) {\n        console.log(\"add to cart response for post\", res);\n        this.toastr.success(\"Book Added To Cart !!\");\n      } else {\n        console.log(\"add to cart error response for post\", res);\n        this.toastr.error(\"Unable to add book to the cart\");\n      }\n    });\n  }\n  ngOnInit() {}\n  static #_ = this.ɵfac = function BookComponent_Factory(t) {\n    return new (t || BookComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.HttpService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookComponent,\n    selectors: [[\"app-book\"]],\n    inputs: {\n      book: \"book\"\n    },\n    decls: 25,\n    vars: 15,\n    consts: [[1, \"flex\", \"border\", \"rounded-xl\", \"h-60\"], [\"width\", \"100\", 1, \"m-auto\", \"rounded-sm\", 3, \"src\", \"alt\"], [1, \"m-auto\"], [1, \"my-4\"], [3, \"formGroup\"], [\"for\", \"quantity\"], [\"type\", \"quantity\", \"placeholder\", \"Quantity\", \"formControlName\", \"quantity\", \"required\", \"\", 1, \"form-control\", \"p-1\", \"rounded\", \"border\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [1, \"border\", \"rounded\", \"bg-purple-600\", \"text-white\", \"p-1\", 3, \"disabled\", \"click\"], [2, \"color\", \"red\"]],\n    template: function BookComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"li\", 0);\n        i0.ɵɵelement(1, \"img\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"p\")(4, \"strong\");\n        i0.ɵɵtext(5);\n        i0.ɵɵpipe(6, \"titlecase\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelementStart(8, \"p\")(9, \"strong\");\n        i0.ɵɵtext(10);\n        i0.ɵɵpipe(11, \"titlecase\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"p\", 3);\n        i0.ɵɵtext(13);\n        i0.ɵɵpipe(14, \"currency\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"form\", 4)(16, \"label\", 5);\n        i0.ɵɵtext(17, \"Book Quantity \\u00A0 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"input\", 6)(19, \"br\");\n        i0.ɵɵtemplate(20, BookComponent_span_20_Template, 2, 0, \"span\", 7);\n        i0.ɵɵelement(21, \"br\");\n        i0.ɵɵelementStart(22, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function BookComponent_Template_button_click_22_listener() {\n          return ctx.addtocart();\n        });\n        i0.ɵɵelementStart(23, \"strong\");\n        i0.ɵɵtext(24, \"ADD TO CART\");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"src\", ctx.book.src, i0.ɵɵsanitizeUrl)(\"alt\", ctx.book.name);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 8, ctx.book.name));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"by \", i0.ɵɵpipeBind1(11, 10, ctx.book.author), \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(14, 12, ctx.book.amount, \"INR\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.qty);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.quantity && ctx.quantity.invalid);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.qty.valid);\n      }\n    },\n    dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.FormGroupDirective, i5.FormControlName, i4.TitleCasePipe, i4.CurrencyPipe],\n    styles: [\".book[_ngcontent-%COMP%]{list-style:none;text-overflow:ellipse;width:240px;padding:20px}.giveborder[_ngcontent-%COMP%]{border-radius:4px}\"]\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}